{
  "name": "Karate (Java 17 + Maven)",
  "image": "mcr.microsoft.com/devcontainers/java:17-bullseye",

  "hostRequirements": { "cpus": 16, "memory": "32gb", "storage": "32gb" },

  // Prefer Maven Wrapper; otherwise install Maven and warm the repo.
  "postCreateCommand": "([ -x ./mvnw ] && ./mvnw -q -B -DskipTests dependency:go-offline) || (sudo apt-get update && sudo apt-get install -y maven && mvn -q -B -DskipTests dependency:go-offline)",

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-vscode.live-server",   // Microsoft Live Preview
        "vscjava.vscode-java-pack",
        "karatelabs.karate"
      ],
      "settings": {
        // Open the Karate report when you start Live Preview
        "livePreview.serverRoot": "target/karate-reports",
        "livePreview.defaultPreviewPath": "/karate-summary.html",
        "livePreview.openPreviewTarget": "externalBrowser"
      }
    },
    "codespaces": {
      "openFiles": ["src/test/java/examples/users/users.feature"]
    }
  }
}
